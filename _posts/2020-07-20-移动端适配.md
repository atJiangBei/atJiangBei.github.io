---
layout: post
title: '移动端适配'
date: 2020-07-20
author: jiangbei
tags: jsBasic
---

#移动适配的几种方案

## 1，postcss-px-to-viewport

[postcss-px-to-viewport](https://www.npmjs.com/package/postcss-px-to-viewport)

**安装**

```js

npm install postcss-px-to-viewport -D

```

**解释：**
通过单位转化的方式实现对不同移动端屏幕的适配


**用法**
在项目根目录下面新建文件postcss.config.js

```js

module.exports = {
	plugins:{
		'postcss-px-to-viewport': {
			unitToConvert: 'px',
			//可以从px更改为vw的属性。
			//1,值必须完全匹配。
			//2,使用通配符*启用所有属性。例如：['*']
			//3,在单词的开头或结尾使用*。（[' position ']将与background-position-y相匹配）
			//4,用 ！不匹配属性。例如：['*'，'！letter-spacing']
			//5,将“ not”前缀与其他前缀组合。例如：[' '，'！font ']
			propList:[*],
		    // 视窗的宽度，对应的是我们设计稿的宽度，我们一般750
		    viewportWidth: 750,
		    // 视窗的高度，根据750设备的宽度来指定，一般指定1334，可以不配置
		    viewportHeight: 1334,
		    // 指定`px`转换为视窗单位值的小数位数
		    unitPrecision: 3,
		    // 指定需要转换成的视窗单位，建议使用vw
		    viewportUnit: 'vw',
		    // 指定不转换为视窗单位的类
		    selectorBlackList: ['.ignore'],
		    //小于或等于1px的不转化
		    minPixelValue: 1,
		    // 允许在媒体查询中转换`px`
		    mediaQuery: false
		}
	}
}

```

更加详细配置请移至npm官方文档[postcss-px-to-viewport](https://www.npmjs.com/package/postcss-px-to-viewport)



## 2，postcss-pxtorem

[postcss-pxtorem](https://www.npmjs.com/package/postcss-pxtorem)

**安装**

```js

npm install postcss-pxtorem -D

```

**以本公司750宽设计图为例：**

```js

//引入下方代码 
;(function(d) {
  const baseSize = 32
  const maxWidth = 540
  const setrem = () => {
    const { min } = Math
    const cw = d.documentElement.clientWidth
    const scale = min(cw, maxWidth) / 750
    d.documentElement.style.fontSize = baseSize * min(scale, 2) + 'px'
  }
  setrem()
  d.addEventListener('resize', setrem)
})(document);

```

**用法**
在项目根目录下面新建文件postcss.config.js

```js

module.exports = {
	plugins:{
		'postcss-pxtorem': {
			rootValue: 32,
			//允许REM单位增长的十进制数字。
			unitPrecision: 5,
			propList: ['font', 'font-size', 'line-height', 'letter-spacing'],
			//黑名单，排除某个类名或者以某个前缀开头的
			selectorBlackList: ['.toast'],
			//替换或者覆盖
			replace: true,
			//是否转化媒体查询的单位
			mediaQuery: false,
			//最小不转化单位
			minPixelValue: 0,
			//排除项
			exclude: /node_modules/i
		}
	}
}

```

```css

.container{
	width:750px;
}

```

转为

```css

.container{
	width:7.5rem;
}

```


更加详细说明请移至npm官方文档[postcss-pxtorem](https://www.npmjs.com/package/postcss-pxtorem)