---
layout: post
title: '技术文档'
date: 2019-07-13
author: jiangbei
tags: amusing
---

# 有趣的事情

## 一，函数防抖运用在点击事件中时延时的最小值

假如防抖函数定义为以下
```javascript
function throttle(method,wait,context){
	clearTimeout(method.tId)
	method.tId = setTimeout(function(){
		method.call(context)
	},wait)
}

```

实现需求多次点击按钮时以最后一次点击为执行事件

```javascript
let wait = 100
let submitFn = function(){
		console.log("提交")
	}

dom.addEventListener("click",function(){
	throttle(submitFn,wait)
	
})


```

* 测试以后结果：似乎没什么用，点击了几次，就输出了几个'提交'
* 分析：很明显，原因就是第二次点击并没有清除掉前一次设置的延时器，在第二次点击之前前一次延时器的事件已经执行了

再次测试，我们来看一下再一次点击和前一次之间间隔的时间（当然，这个以手速为准，我试试自己的）

```javascript
let last = +new Date()

let wait = 0
let submitFn = function(){
		let newd = +new Date()
		console.log(newd - last)
		last = newd
	}

dom.addEventListener("click",function(){
	throttle(submitFn,wait)
	
})

```

控制台输出：
* 120
* 128
* 136
* 120
* 136
* 129
* 144
* 127
* 136
* 120
* 152
* 128
* 145
* 135
* 121
* 135
* 144

* 可以看出：间隔时间大多维持在120-150之间（自认手速已经很快了，当然有更快的老兄）
* 现在把wait设置为150我们再来测试一下


```javascript
let wait = 150
let submitFn = function(){
		console.log("提交")
	}

dom.addEventListener("click",function(){
	throttle(submitFn,wait)
	
})


```

结果：按我的手速快速点击提交按钮，只有最后一次会提交